<!DOCTYPE html>
{% load staticfiles %}
<html>
<head>
    <title>Simple Player Analysis & Draft Engine</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CDN for Bootstrap 3.2.0 -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

    <!-- CDN for AngularJS 1.2.18 -->
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.18/angular.min.js"></script>

    <!-- CDN for angular-ui-bootstrap 0.11.0 -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.11.0/ui-bootstrap-tpls.min.js"></script>

    <!-- Staticfiles loading for our local css -->
    <link rel="stylesheet" href="{% static "css/base.css" %}">
    <link rel="stylesheet" href="{% static "css/players.css" %}">

    <!-- Staticfiles loading for our local javascript -->
    <script src="{% static "javascript/app.js" %}"></script>
    <script src="{% static "javascript/controllers.js" %}"></script>
    <script src="{% static "javascript/services.js" %}"></script>
</head>
<body ng-app="PlayersApp" ng-controller="playersController">
    <div class="col-md-9 col-lg-9 playersColumn">
        <div class="jumbotron">
            <div align="center" class="container">
                <h1>Welcome to SPADE!</h1>
                <p>Otherwise known as the <b>S</b>imple <b>P</b>layer <b>A</b>nalysis & <b>D</b>raft <b>E</b>ngine</p>
                <p>* All stats collected are from the 2013 season</p>
                <button class="btn btn-primary" ng-click="openLoginModal()">Admin Login</button>
            </div>
        </div>
        <div class="tableHolder">
            <div class="filters">
                <div class="searchBox">
                    <input type="text" ng-model="search.name" placeholder="Search Name" class="form-control">
                </div>
                <div class="filterSelect">
                    <label>Position:&nbsp;
                        <select ng-model="search.position">
                            <option value="">All</option>
                            <option ng-repeat="position in positions" value="{[{position}]}">{[{position}]}</option>
                        </select>
                    </label>
                </div>
                <div class="filterSelect">
                    <label>NFL Team:&nbsp;
                        <select ng-model="search.nfl_team">
                            <option value="">All</option>
                            <option ng-repeat="(short,long) in nflTeams" value="{[{short}]}">{[{long}]}</option>
                        </select>
                    </label>
                </div>
                <div class="filterSelect">
                    <label>Availability:&nbsp;
                        <select ng-model="search.available">
                            <option value="">All</option>
                            <option value="true">Only Available</option>
                            <option value="false">Only Unavailable</option>
                        </select>
                    </label>
                </div>
                <div class="filterSelect">
                    <label>Tagged:&nbsp;
                        <select ng-model="search.tagged">
                            <option value="">All</option>
                            <option value="true">Tagged</option>
                            <option value="false">Untagged</option>
                        </select>
                    </label>
                </div>
            </div>
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Tag</th>
                        
                        <!-- Common to all players -->
                        <th ng-class="{'sorted': predicate == 'name'}">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'name'; reverse = !reverse">
                                Name
                                <span ng-class="{'caret': predicate == 'name', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        <th ng-class="{'sorted': predicate == 'position'}">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'position'; reverse = !reverse">
                                Pos
                                <span ng-class="{'caret': predicate == 'position', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        <th ng-class="{'sorted': predicate == 'nfl_team'}">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'nfl_team'; reverse = !reverse">
                                NFL Team
                                <span ng-class="{'caret': predicate == 'nfl_team', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        <th ng-class="{'sorted': predicate == 'bye_week'}">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'bye_week'; reverse = !reverse">
                                Bye
                                <span ng-class="{'caret': predicate == 'bye_week', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        <th ng-class="{'sorted': predicate == 'games_played'}">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'games_played'; reverse = !reverse">
                                Games
                                <span ng-class="{'caret': predicate == 'games_played', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        <th ng-class="{'sorted': predicate == 'last_season_points'}">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'last_season_points'; reverse = !reverse">
                                2013 Points
                                <span ng-class="{'caret': predicate == 'last_season_points', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        <th ng-class="{'sorted': predicate == 'league_team'}">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'league_team'; reverse = !reverse">
                                League Team
                                <span ng-class="{'caret': predicate == 'league_team', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        
                        <!-- QB stats -->
                        <th ng-class="{'sorted': predicate == 'passing_yards'}" ng-show="search.position == 'QB'">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'passing_yards'; reverse = !reverse">
                                Passing Yards
                                <span ng-class="{'caret': predicate == 'passing_yards', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        <th ng-class="{'sorted': predicate == 'passing_touchdowns'}" ng-show="search.position == 'QB'">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'passing_touchdowns'; reverse = !reverse">
                                Passing touchdowns
                                <span ng-class="{'caret': predicate == 'passing_touchdowns', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        <th ng-class="{'sorted': predicate == 'interceptions'}" ng-show="search.position == 'QB'">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'interceptions'; reverse = !reverse">
                                Interceptions
                                <span ng-class="{'caret': predicate == 'interceptions', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        <th ng-class="{'sorted': predicate == 'completion_percentage'}" ng-show="search.position == 'QB'">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'completion_percentage'; reverse = !reverse">
                                Comp Pct
                                <span ng-class="{'caret': predicate == 'completion_percentage', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        
                        <!-- RB -->
                        <th ng-class="{'sorted': predicate == 'rushing_yards'}" ng-show="search.position == 'RB'">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'rushing_yards'; reverse = !reverse">
                                Rushing Yards
                                <span ng-class="{'caret': predicate == 'rushing_yards', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        <th ng-class="{'sorted': predicate == 'rushing_touchdowns'}" ng-show="search.position == 'RB'">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'rushing_touchdowns'; reverse = !reverse">
                                Rushing Touchdowns
                                <span ng-class="{'caret': predicate == 'rushing_touchdowns', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>

                        <!-- WR/TE -->
                        <th ng-class="{'sorted': predicate == 'receiving_yards'}" ng-show="search.position == 'WR' || search.position == 'TE'">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'receiving_yards'; reverse = !reverse">
                                Receiving Yards
                                <span ng-class="{'caret': predicate == 'receiving_yards', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        <th ng-class="{'sorted': predicate == 'receiving_touchdowns'}" ng-show="search.position == 'WR' || search.position == 'TE'">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'receiving_touchdowns'; reverse = !reverse">
                                Receiving Touchdowns
                                <span ng-class="{'caret': predicate == 'receiving_touchdowns', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        
                        <!-- K -->
                        <th ng-class="{'sorted': predicate == 'fg_percentage'}" ng-show="search.position == 'K'">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'fg_percentage'; reverse = !reverse">
                                FG Percent
                                <span ng-class="{'caret': predicate == 'fg_percentage', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        <th ng-class="{'sorted': predicate == 'longest_fg'}" ng-show="search.position == 'K'">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'longest_fg'; reverse = !reverse">
                                Longest FG
                                <span ng-class="{'caret': predicate == 'longest_fg', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        
                        <!-- D/ST -->
                        <th ng-class="{'sorted': predicate == 'def_points_per_game'}" ng-show="search.position == 'D/ST'">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'def_points_per_game'; reverse = !reverse">
                                Points Allowed/Game
                                <span ng-class="{'caret': predicate == 'def_points_per_game', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        <th ng-class="{'sorted': predicate == 'def_interceptions'}" ng-show="search.position == 'D/ST'">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'def_interceptions'; reverse = !reverse">
                                Interceptions
                                <span ng-class="{'caret': predicate == 'def_interceptions', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                        <th ng-class="{'sorted': predicate == 'dst_touchdowns'}" ng-show="search.position == 'D/ST'">
                            <div class="sortableHeader noSelect" ng-click="predicate = 'dst_touchdowns'; reverse = !reverse">
                                Touchdowns
                                <span ng-class="{'caret': predicate == 'dst_touchdowns', 'caret-reversed': reverse}"></span>
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="player in playersList | orderBy:predicate:reverse | filter:search:strict"
                        ng-class="{'bg-danger': !player.available, 'bg-warning': player.tagged}">
                        <td ng-click="player.tagged = player.available ? !player.tagged : false" ng-class="{'tagBox': player.available}" class="noSelect">
                            <input type="checkbox" ng-checked="player.tagged" ng-disabled="!player.available">
                        </td>
                        
                        <!-- Common to all players -->
                        <td ng-class="{'sorted': predicate == 'name'}">{[{player.name}]}</td>
                        <td ng-class="{'sorted': predicate == 'position'}">{[{player.position}]}</td>
                        <td ng-class="{'sorted': predicate == 'nfl_team'}">{[{player.nfl_team}]}</td>
                        <td ng-class="{'sorted': predicate == 'bye_week'}">{[{player.bye_week}]}</td>
                        <td ng-class="{'sorted': predicate == 'games_played'}">{[{player.games_played}]}</td>
                        <td ng-class="{'sorted': predicate == 'last_season_points'}">{[{player.last_season_points}]}</td>
                        <td ng-class="{'sorted': predicate == 'league_team'}">{[{player.league_team}]}</td>

                        <!-- QB stats -->
                        <td ng-class="{'sorted': predicate == 'passing_yards'}" ng-show="search.position == 'QB'">{[{player.passing_yards}]}</td>
                        <td ng-class="{'sorted': predicate == 'passing_touchdowns'}" ng-show="search.position == 'QB'">{[{player.passing_touchdowns}]}</td>
                        <td ng-class="{'sorted': predicate == 'interceptions'}" ng-show="search.position == 'QB'">{[{player.interceptions}]}</td>
                        <td ng-class="{'sorted': predicate == 'completion_percentage'}" ng-show="search.position == 'QB'">{[{player.completion_percentage}]}</td>

                        <!-- RB -->
                        <td ng-class="{'sorted': predicate == 'rushing_yards'}" ng-show="search.position == 'RB'">{[{player.rushing_yards}]}</td>
                        <td ng-class="{'sorted': predicate == 'rushing_touchdowns'}" ng-show="search.position == 'RB'">{[{player.rushing_touchdowns}]}</td>

                        <!-- WR/TE -->
                        <td ng-class="{'sorted': predicate == 'receiving_yards'}" ng-show="search.position == 'WR' || search.position == 'TE'">{[{player.receiving_yards}]}</td>
                        <td ng-class="{'sorted': predicate == 'receiving_touchdowns'}" ng-show="search.position == 'WR' || search.position == 'TE'">{[{player.receiving_touchdowns}]}</td>
                        
                        <!-- K -->
                        <td ng-class="{'sorted': predicate == 'fg_percentage'}" ng-show="search.position == 'K'">{[{player.fg_percentage}]}</td>
                        <td ng-class="{'sorted': predicate == 'longest_fg'}" ng-show="search.position == 'K'">{[{player.longest_fg}]}</td>
                        
                        <!-- D/ST -->
                        <td ng-class="{'sorted': predicate == 'def_points_per_game'}" ng-show="search.position == 'D/ST'">{[{player.def_points_per_game}]}</td>
                        <td ng-class="{'sorted': predicate == 'def_interceptions'}" ng-show="search.position == 'D/ST'">{[{player.def_interceptions}]}</td>
                        <td ng-class="{'sorted': predicate == 'dst_touchdowns'}" ng-show="search.position == 'D/ST'">{[{player.dst_touchdowns}]}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="col-md-3 col-lg-3 teamList">
        <div class="filters" align="center">
            <div class="teamFilterSelect">
                <label>Select Team:&nbsp;
                    <select ng-model="selectedLeagueTeam">
                        <option ng-repeat="(short,long) in leagueTeams" value="{[{short}]}">{[{long}]}</option>
                    </select>
                </label>
            </div>
        </div>
        <div class="teamPlayer" ng-repeat="position in leaguePositions">
            <span class="playerPosition">{[{position}]}</span>
            <span class="playerName">{[{getTeamPosition(selectedLeagueTeam, position).name}]}</span>
        </div>
        <div class="teamListCounts fixedFooter">
            <b>TOTALS:&nbsp</b>
            <span ng-repeat="position in positions" class="playerCount">
                {[{position}]}: {[{getTeamPositionPlayerCount(selectedLeagueTeam, position)}]}
            </span>
        </div>
    </div>
    <script type="text/ng-template" id="login_modal.html">
        <div class="modal-header">
            Admin Login
        </div>
        <div class="modal-body">
            <label>Password:<input type="password" ng-model="password.string" /></label>
        </div>
        <div class="modal-footer">
            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
            <button class="btn btn-primary" ng-click="submit()">Submit</button>
        </div>
    </script>
</body>
</html>